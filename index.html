<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… QC-QA Pharma | Ø¯. Ø¯Ø§ÙˆØ¯ ØªØ§Ø¬ Ø§Ù„Ø¯ÙŠÙ†</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f7f6; margin: 0; padding: 20px; }
        .container { max-width: 1000px; margin: auto; }
        .card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-bottom: 20px; }
        h1, h2 { color: #2c3e50; border-bottom: 3px solid #27ae60; padding-bottom: 10px; }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; color: #34495e; }
        input, select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; }
        .btn { background-color: #2c3e50; color: white; padding: 15px; border: none; border-radius: 8px; cursor: pointer; width: 100%; font-size: 16px; font-weight: bold; margin-top: 10px; transition: 0.3s; }
        .btn:hover { background-color: #1a252f; }
        table { width: 100%; border-collapse: collapse; margin-top: 25px; background: white; border-radius: 10px; overflow: hidden; }
        th, td { border: 1px solid #eee; padding: 15px; text-align: center; }
        th { background-color: #27ae60; color: white; }
        .pass { background-color: #d4edda; color: #155724; font-weight: bold; display: block; padding: 5px; border-radius: 4px; }
        .oos { background-color: #f8d7da; color: #721c24; font-weight: bold; display: block; padding: 5px; border-radius: 4px; border: 1px solid #f5c6cb; }
        .limit-info { font-size: 0.85em; color: #666; display: block; }
    </style>
</head>
<body>

<div class="container">
    <div class="card">
        <h1>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬ÙˆØ¯Ø© Ø§Ù„ØµÙŠØ¯Ù„Ø§Ù†ÙŠØ© ğŸ’Š</h1>
        <p>Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØªØ·ÙˆÙŠØ±: <strong>Ø¯. Ø¯Ø§ÙˆØ¯ ØªØ§Ø¬ Ø§Ù„Ø¯ÙŠÙ† Ø£Ø­Ù…Ø¯</strong></p>
    </div>

    <div class="card">
        <h2>Ù†Ù…ÙˆØ°Ø¬ ÙØ­Øµ ÙˆØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¹ÙŠÙ†Ø§Øª</h2>
        <div class="form-grid">
            <div class="form-group">
                <label>Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬:</label>
                <select id="prodName" onchange="updateMonographInfo()">
                    <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†ØªØ¬ --</option>
                    <option value="Paracetamol">Paracetamol 500mg Tab</option>
                    <option value="Metformin">Metformin 850mg Tab</option>
                    <option value="Amoxicillin">Amoxicillin 500mg Cap</option>
                </select>
            </div>
            <div class="form-group">
                <label>Ø§Ù„Ù…Ø±Ø¬Ø¹ Ø§Ù„Ø¯ÙˆØ§Ø¦ÙŠ:</label>
                <select id="specType" onchange="updateMonographInfo()">
                    <option value="BP">British Pharmacopoeia (BP)</option>
                    <option value="USP">United States Pharmacopeia (USP)</option>
                </select>
            </div>
            <div class="form-group">
                <label>Ø±Ù‚Ù… Ø§Ù„ØªØ´ØºÙŠÙ„Ø©:</label>
                <input type="text" id="batchNo" placeholder="Batch Number">
            </div>
            <div class="form-group">
                <label>Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© (%):</label>
                <input type="number" id="resultValue" step="0.01" placeholder="Ù…Ø«Ù„Ø§Ù‹: 98.5">
            </div>
        </div>
        <button class="btn" onclick="validateAndSave()">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙˆØ§Ø¹ØªÙ…Ø§Ø¯Ù‡Ø§</button>
    </div>

    <div class="card">
        <h2>Ø³Ø¬Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø®Ø¨Ø±ÙŠØ©</h2>
        <table id="resultsTable">
            <thead>
                <tr>
                    <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
                    <th>Ø§Ù„ØªØ´ØºÙŠÙ„Ø©</th>
                    <th>Ø§Ù„Ù…ÙˆØ§ØµÙØ© / Ø§Ù„Ù…Ø±Ø¬Ø¹</th>
                    <th>Ø§Ù„Ù†ØªÙŠØ¬Ø©</th>
                    <th>Ø§Ù„Ù‚Ø±Ø§Ø±</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>

<script>
    const pharmaDB = {
        "Paracetamol": {
            "BP": { min: 95.0, max: 105.0, test: "Assay" },
            "USP": { min: 90.0, max: 110.0, test: "Assay" }
        },
        "Metformin": {
            "BP": { min: 95.0, max: 105.0, test: "Assay" },
            "USP": { min: 98.0, max: 102.0, test: "Assay" }
        },
        "Amoxicillin": {
            "BP": { min: 92.5, max: 110.0, test: "Assay" },
            "USP": { min: 90.0, max: 120.0, test: "Assay" }
        }
    };

    function validateAndSave() {
        const prod = document.getElementById('prodName').value;
        const spec = document.getElementById('specType').value;
        const batch = document.getElementById('batchNo').value;
        const resultVal = document.getElementById('resultValue').value;
        const result = parseFloat(resultVal);

        if (!prod || !batch || isNaN(result)) {
            alert("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù†ØªØ¬ ÙˆØ±Ù‚Ù… Ø§Ù„ØªØ´ØºÙŠÙ„Ø© ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¨Ø¯Ù‚Ø©.");
            return;
        }

        const limits = pharmaDB[prod][spec];
        const min = limits.min;
        const max = limits.max;

        let statusText, statusClass;

        // Ù…Ù‚Ø§Ø±Ù†Ø© Ø±Ù‚Ù…ÙŠØ© Ø¯Ù‚ÙŠÙ‚Ø©
        if (result >= min && result <= max) {
            statusText = "Ù…Ø·Ø§Ø¨Ù‚ (Complies)";
            statusClass = "pass";
        } else {
            statusText = "Ø®Ø§Ø±Ø¬ Ø§Ù„Ù…ÙˆØ§ØµÙØ© (OOS)";
            statusClass = "oos";
        }

        const table = document.getElementById('resultsTable').getElementsByTagName('tbody')[0];
        const row = table.insertRow(0);
        row.innerHTML = `
            <td>${prod}</td>
            <td>${batch}</td>
            <td>${spec} - ${limits.test} <span class="limit-info">(${min}% - ${max}%)</span></td>
            <td>${result}%</td>
            <td><span class="${statusClass}">${statusText}</span></td>
        `;

        // Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø®Ø§Ù†Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙ‚Ø·
        document.getElementById('resultValue').value = '';
    }
</script>
</body>
</html>