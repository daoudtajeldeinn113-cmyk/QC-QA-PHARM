<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SCI PHARMA - Smart LIMS v13.0</title>
    <style>
        :root { --primary: #1e293b; --accent: #0284c7; --success: #059669; --bg: #f8fafc; --text: #334155; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; margin: 0; display: flex; height: 100vh; background: var(--bg); color: var(--text); overflow: hidden; }
        
        /* Sidebar */
        .sidebar { width: 260px; background: var(--primary); color: white; display: flex; flex-direction: column; flex-shrink: 0; }
        .logo { padding: 25px; text-align: center; background: #0f172a; font-size: 22px; font-weight: bold; color: #38bdf8; border-bottom: 1px solid #1e293b; }
        .nav-group { padding: 15px 20px 5px; font-size: 11px; color: #94a3b8; text-transform: uppercase; letter-spacing: 1px; }
        .nav-item { padding: 12px 20px; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: 0.2s; border-left: 4px solid transparent; }
        .nav-item:hover { background: #334155; }
        .nav-item.active { background: #334155; border-left-color: #38bdf8; color: #38bdf8; }

        /* Main Content */
        .main { flex: 1; overflow-y: auto; padding: 30px; }
        .view { display: none; }
        .view.active { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* UI Components */
        .card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); margin-bottom: 25px; border: 1px solid #e2e8f0; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-size: 12px; font-weight: bold; margin-bottom: 6px; color: #64748b; }
        input, select, textarea { width: 100%; padding: 10px; border: 1px solid #cbd5e1; border-radius: 8px; font-size: 14px; outline: none; transition: border 0.2s; }
        input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(2, 132, 199, 0.1); }
        
        /* Table Styles */
        table { width: 100%; border-collapse: collapse; margin-top: 15px; background: white; border-radius: 8px; overflow: hidden; }
        th { background: #f1f5f9; padding: 15px; text-align: left; font-size: 13px; color: #475569; border-bottom: 2px solid #e2e8f0; }
        td { padding: 12px 15px; border-bottom: 1px solid #f1f5f9; font-size: 14px; }
        .status-badge { padding: 4px 8px; border-radius: 99px; font-size: 11px; font-weight: bold; }
        .pass { background: #dcfce7; color: #166534; }
        .fail { background: #fee2e2; color: #991b1b; }

        .btn { padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; transition: 0.2s; }
        .btn-primary { background: var(--accent); color: white; }
        .btn-success { background: var(--success); color: white; }

        @media print { .sidebar, .no-print { display: none !important; } .main { padding: 0; } .card { border: none; box-shadow: none; } }
    </style>
</head>
<body>

<aside class="sidebar no-print">
    <div class="logo">SCI PHARMA</div>
    
    <div class="nav-group">Monitoring</div>
    <div class="nav-item active" onclick="switchTab('dash', this)">üìä Dashboard</div>
    
    <div class="nav-group">In-Process (IPC)</div>
    <div class="nav-item" onclick="switchTab('gran', this)">‚öôÔ∏è Granulation</div>
    <div class="nav-item" onclick="switchTab('comp', this)">üíä Compression</div>

    <div class="nav-group">Quality Control</div>
    <div class="nav-item" onclick="switchTab('qc-lab', this)">üß™ Analysis & Release</div>
    <div class="nav-item" onclick="switchTab('oos', this)">‚ö†Ô∏è OOS & CAPA</div>
    
    <div style="margin-top: auto; padding: 20px; font-size: 10px; color: #64748b; border-top: 1px solid #1e293b;">
        Enterprise LIMS v13.0<br>Mode: Offline-Stable
    </div>
</aside>

<main class="main">
    <div id="view-dash" class="view active">
        <h2>Operations Overview</h2>
        <div class="grid">
            <div class="card" style="border-top: 4px solid #0284c7;">
                <label>Batches In-Progress</label>
                <div style="font-size: 32px; font-weight: bold;">3</div>
            </div>
            <div class="card" style="border-top: 4px solid #059669;">
                <label>Released (Month)</label>
                <div style="font-size: 32px; font-weight: bold;">142</div>
            </div>
            <div class="card" style="border-top: 4px solid #dc2626;">
                <label>OOS Investigations</label>
                <div style="font-size: 32px; font-weight: bold;">0</div>
            </div>
        </div>
    </div>

    <div id="view-gran" class="view">
        <h2>IPC: Granulation Stage</h2>
        <div class="card">
            <div class="grid">
                <div class="form-group"><label>Batch Number</label><input type="text" placeholder="e.g. TA01"></div>
                <div class="form-group"><label>LOD % (Limit < 3%)</label><input type="number" step="0.1"></div>
                <div class="form-group"><label>Sieve Analysis</label><input type="text" placeholder="Pass/Fail"></div>
            </div>
            <button class="btn btn-primary">Save Granulation Log</button>
        </div>
    </div>

    <div id="view-comp" class="view">
        <h2>IPC: Compression Stage</h2>
        <div class="card">
            <div class="grid">
                <div class="form-group"><label>Avg Weight (mg)</label><input type="number"></div>
                <div class="form-group"><label>Hardness (N)</label><input type="number"></div>
                <div class="form-group"><label>Thickness (mm)</label><input type="number"></div>
            </div>
            <button class="btn btn-primary">Log Compression Data</button>
        </div>
    </div>

    <div id="view-qc-lab" class="view">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h2>QC Analytical Interface</h2>
            <button class="btn btn-success" onclick="window.print()">Print Official COA</button>
        </div>

        <div class="card">
            <div class="grid">
                <div class="form-group">
                    <label>Product Select (Preset Library)</label>
                    <select id="preset-selector" onchange="applyPreset()">
                        <option value="">-- Choose Product --</option>
                        <optgroup label="Finished Products (Tablets/Liquids)">
                            <option value="asp_tab">Aspirin 100mg Tablets</option>
                            <option value="par_tab">Paracetamol 500mg Tablets</option>
                            <option value="pov_sol">Povidone Iodine 10% Solution</option>
                        </optgroup>
                        <optgroup label="Raw Materials (API/Excipients)">
                            <option value="asp_raw">Aspirin (Raw Material)</option>
                            <option value="par_raw">Paracetamol (Raw Material)</option>
                            <option value="mcc_raw">Microcrystalline Cellulose (MCC)</option>
                        </optgroup>
                    </select>
                </div>
                <div class="form-group"><label>Batch #</label><input type="text" id="b_no"></div>
                <div class="form-group"><label>A.R. Number</label><input type="text" id="b_ar"></div>
            </div>
        </div>

        <div class="card">
            <h3>Test Results Table</h3>
            <table id="analysis-table">
                <thead>
                    <tr><th>Test Parameter</th><th>Specification</th><th>Result</th><th>Compliance</th></tr>
                </thead>
                <tbody id="test-body">
                    <tr><td colspan="4" style="text-align:center; color:#94a3b8;">Select a product to load specifications</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <div id="view-oos" class="view">
        <h2 style="color:#dc2626;">OOS & CAPA Management</h2>
        <div class="card">
            <div class="form-group"><label>Reason for Investigation</label><textarea rows="4"></textarea></div>
            <button class="btn" style="background:#dc2626; color:white;">Initiate Investigation</button>
        </div>
    </div>
</main>

<script>
    // PRESET DATA LIBRARY
    const presets = {
        asp_tab: {
            name: "Aspirin 100mg Tablets",
            tests: [
                {p: "Description", s: "White, round tablets", type: "list", opts: ["Comply", "Non-Comply"]},
                {p: "Identification", s: "Positive Reaction", type: "list", opts: ["Positive", "Negative"]},
                {p: "Assay", s: "95.0% - 105.0%", min: 95, max: 105},
                {p: "Friability", s: "NMT 1.0%", max: 1.0},
                {p: "Dissolution", s: "NLT 80%", min: 80}
            ]
        },
        par_tab: {
            name: "Paracetamol 500mg Tablets",
            tests: [
                {p: "Description", s: "White uncoated tablets", type: "list", opts: ["Comply", "Non-Comply"]},
                {p: "Disintegration", s: "NMT 15 min", max: 15},
                {p: "Assay", s: "95.0% - 105.0%", min: 95, max: 105}
            ]
        },
        pov_sol: {
            name: "Povidone Iodine 10% Solution",
            tests: [
                {p: "Appearance", s: "Reddish-brown liquid", type: "list", opts: ["Comply", "Non-Comply"]},
                {p: "Assay (Iodine)", s: "0.85% - 1.20% w/v", min: 0.85, max: 1.20},
                {p: "pH", s: "3.0 - 6.5", min: 3.0, max: 6.5}
            ]
        },
        asp_raw: {
            name: "Aspirin (Raw Material)",
            tests: [
                {p: "Melting Point", s: "About 143¬∞C", min: 140, max: 146},
                {p: "Assay", s: "99.5% - 101.0%", min: 99.5, max: 101.0},
                {p: "Sulfated Ash", s: "NMT 0.1%", max: 0.1}
            ]
        },
        mcc_raw: {
            name: "MCC (Excipient)",
            tests: [
                {p: "pH", s: "5.0 - 7.5", min: 5.0, max: 7.5},
                {p: "Conductivity", s: "NMT 75 ¬µS/cm", max: 75},
                {p: "Loss on Drying", s: "NMT 7.0%", max: 7.0}
            ]
        }
    };

    function switchTab(id, el) {
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        document.getElementById('view-' + id).classList.add('active');
        el.classList.add('active');
    }

    function applyPreset() {
        const key = document.getElementById('preset-selector').value;
        const body = document.getElementById('test-body');
        if(!key) return;

        const data = presets[key];
        body.innerHTML = data.tests.map((t, i) => `
            <tr>
                <td><b>${t.p}</b></td>
                <td><small>${t.s}</small></td>
                <td>
                    ${t.type === 'list' ? 
                        `<select id="res_${i}" onchange="validate(${i}, '${key}')"><option value="">-</option>${t.opts.map(o=>`<option>${o}</option>`).join('')}</select>` : 
                        `<input type="number" id="res_${i}" step="0.01" oninput="validate(${i}, '${key}')">`}
                </td>
                <td id="stat_${i}">-</td>
            </tr>
        `).join('');
    }

    function validate(i, key) {
        const t = presets[key].tests[i];
        const val = document.getElementById('res_'+i).value;
        const stat = document.getElementById('stat_'+i);
        let isPass = false;

        if (t.type === 'list') {
            isPass = (val === "Comply" || val === "Positive" || val === "Concordant");
        } else {
            const n = parseFloat(val);
            isPass = (!t.min || n >= t.min) && (!t.max || n <= t.max);
        }

        stat.innerHTML = isPass ? '<span class="status-badge pass">PASS</span>' : '<span class="status-badge fail">FAIL</span>';
    }
</script>

</body>
</html>