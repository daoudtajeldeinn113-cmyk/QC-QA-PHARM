<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SCI PHARMA - QMS v16.0 Full Compliance</title>
    <style>
        :root { --sidebar: #1e293b; --accent: #3b82f6; --fail: #dc2626; --pass: #16a34a; }
        * { box-sizing: border-box; }
        body { font-family: "Times New Roman", serif; margin: 0; display: flex; height: 100vh; background: #f1f5f9; }
        
        .sidebar { width: 250px; background: var(--sidebar); color: white; flex-shrink: 0; font-family: sans-serif; overflow-y: auto; }
        .nav-item { padding: 12px 20px; cursor: pointer; border-left: 4px solid transparent; transition: 0.2s; border-bottom: 1px solid #334155; }
        .nav-item:hover, .nav-item.active { background: #334155; border-left-color: var(--accent); }
        .nav-group { padding: 15px 20px 5px; font-size: 11px; color: #94a3b8; text-transform: uppercase; letter-spacing: 1px; }

        .workspace { flex: 1; overflow-y: auto; padding: 25px; }
        .view { display: none; max-width: 1000px; margin: auto; background: white; padding: 30px; border: 1px solid black; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        .view.active { display: block; }

        .coa-header { text-align: center; border-bottom: 2px solid black; margin-bottom: 15px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid black; padding: 6px; text-align: left; font-size: 13px; }
        th { background: #f8fafc; }
        .section-title { background: #e2e8f0; font-weight: bold; text-align: center; text-transform: uppercase; }

        .status-badge { padding: 3px 8px; border-radius: 4px; font-weight: bold; font-size: 11px; }
        .pass { background: #dcfce7; color: #166534; }
        .fail { background: #fee2e2; color: #991b1b; }

        .no-print { background: #eff6ff; padding: 15px; margin-bottom: 20px; border-radius: 8px; border: 1px solid #bfdbfe; font-family: sans-serif; }
        input[type="text"], input[type="number"] { width: 100%; border: 1px solid #cbd5e1; padding: 4px; font-family: inherit; }
        
        @media print { .sidebar, .no-print, button { display: none !important; } .workspace { padding: 0; } .view { border: none; box-shadow: none; } }
    </style>
</head>
<body>

<nav class="sidebar">
    <div style="padding: 20px; text-align:center;"><b style="font-size:20px; color:var(--accent);">SCI PHARMA</b></div>
    
    <div class="nav-group">Operational Log</div>
    <div class="nav-item active" onclick="showView('dash', this)">üìä Dashboard</div>
    <div class="nav-item" onclick="showView('ipc', this)">‚öôÔ∏è In-Process Tests</div>
    
    <div class="nav-group">Quality Control</div>
    <div class="nav-item" onclick="showView('qc', this)">üß™ Final Release (COA)</div>
    <div class="nav-item" onclick="showView('oos', this)">‚ö†Ô∏è OOS/CAPA Report</div>
</nav>

<main class="workspace">

    <div id="view-dash" class="view active" style="border:none; background:transparent;">
        <h1>GMP Documentation System</h1>
        <p>Welcome Dr. Daoud. All modules (IPC, Micro, Chemical) are now fully integrated for SCI PHARMA standards.</p>
    </div>

    <div id="view-ipc" class="view">
        <div class="coa-header">
            <h2>IN-PROCESS CONTROL LOG</h2>
            <p>Production Stage Monitoring</p>
        </div>
        
        <table class="header-table" style="border:none;">
            <tr><td><b>Product:</b> <input type="text"></td><td><b>Batch No:</b> <input type="text"></td></tr>
        </table>

        <table>
            <tr class="section-title"><td colspan="5">Compression & Granulation Monitoring</td></tr>
            <tr>
                <th>Test Parameter</th>
                <th>Specification</th>
                <th>Standard</th>
                <th>Actual Result</th>
                <th>Compliance</th>
            </tr>
            <tr>
                <td>Friability (%)</td>
                <td>NMT 1.0 %</td>
                <td><input type="number" id="spec-fri" value="1.0" hidden>1.0%</td>
                <td><input type="number" step="0.01" id="res-fri" oninput="validateIPC('fri')"></td>
                <td id="stat-fri">-</td>
            </tr>
            <tr>
                <td>Disintegration (DT)</td>
                <td>NMT 15-30 min</td>
                <td><input type="number" id="spec-dt" value="15" hidden>15m</td>
                <td><input type="number" id="res-dt" oninput="validateIPC('dt')"></td>
                <td id="stat-dt">-</td>
            </tr>
            <tr>
                <td>Thickness (mm)</td>
                <td>4.2 ¬± 0.2 mm</td>
                <td><input type="text" id="spec-thick" value="4.0-4.4" hidden>4.0-4.4</td>
                <td><input type="number" step="0.1" id="res-thick" oninput="validateIPC('thick')"></td>
                <td id="stat-thick">-</td>
            </tr>
            <tr>
                <td>Diameter (mm)</td>
                <td>Report</td>
                <td>-</td>
                <td><input type="text"></td>
                <td>-</td>
            </tr>
        </table>
        <br>
        <button onclick="window.print()">Print IPC Report</button>
    </div>

    <div id="view-qc" class="view">
        <div class="no-print">
            <b>Product Preset:</b>
            <select id="prod-select" onchange="applySpecs()">
                <option value="">-- Select Product --</option>
                <option value="asp">Aspirin 100mg (TA01 Style)</option>
                <option value="par">Paramol 500mg (PA004 Style)</option>
                <option value="pov">Povidone Iodine 10% (PD07 Style)</option>
            </select>
            <button onclick="window.print()" style="float:right;">Print Final COA</button>
        </div>

        <div class="coa-box">
            <div class="coa-header">
                <h1 style="margin:0;">SCI PHARMACEUTICAL INDUSTRY</h1>
                <p>Quality Control Department</p>
                <h2 style="margin:5px; border:1px solid black; display:inline-block; padding:5px 25px;">CERTIFICATE OF ANALYSIS</h2>
            </div>

            <table style="border:none;">
                <tr><td><b>Product:</b> <span id="out-name">-</span></td><td><b>Batch No:</b> <input type="text"></td></tr>
                <tr><td><b>AR No:</b> <span id="out-ar">-</span></td><td><b>Spec:</b> <span id="out-spec">-</span></td></tr>
            </table>

            <table>
                <thead>
                    <tr><th width="30%">Test Parameter</th><th width="35%">Specification</th><th width="20%">Result</th><th width="15%">Status</th></tr>
                </thead>
                <tbody id="chemical-body">
                    <tr class="section-title"><td colspan="4">Physico-Chemical Analysis</td></tr>
                </tbody>
                <tbody id="micro-body">
                    <tr class="section-title"><td colspan="4">Microbiological Analysis</td></tr>
                    <tr><td>TYMC (Molds/Yeasts)</td><td>NMT 10¬≤ CFU/g</td><td><input type="text" value="Absent"></td><td>PASS</td></tr>
                    <tr><td>Staphylococcus aureus</td><td>Absent</td><td><input type="text" value="Absent"></td><td>PASS</td></tr>
                    <tr><td>Pseudomonas aeruginosa (PsA)</td><td>Absent</td><td><input type="text" value="Absent"></td><td>PASS</td></tr>
                    <tr><td>E. Coli</td><td>Absent</td><td><input type="text" value="Absent"></td><td>PASS</td></tr>
                    <tr><td>Salmonella</td><td>Absent</td><td><input type="text" value="Absent"></td><td>PASS</td></tr>
                    <tr><td>TAMC (Bacteria)</td><td>NMT 10¬≥ CFU/g</td><td><input type="text" value="0 CFU/g"></td><td>PASS</td></tr>
                </tbody>
            </table>
        </div>
    </div>

</main>

<script>
    const library = {
        asp: {
            name: "Aspirin 100mg Tablets", ar: "FPP-25-073", spec: "BP 2017",
            tests: [
                {p: "Description", s: "White round tablets", type: "text", target: "Comply"},
                {p: "Assay", s: "95.0 - 105.0 %", type: "range", min: 95, max: 105},
                {p: "Friability", s: "NMT 1.0 %", type: "max", max: 1.0},
                {p: "Weight Uniformity", s: "223.9mg ¬± 5%", type: "range", min: 212.7, max: 235.1}
            ]
        },
        par: {
            name: "Paramol 500mg Tablets", ar: "FPP-25-053", spec: "BP 2025",
            tests: [
                {p: "Description", s: "White uncoated tablets", type: "text", target: "Comply"},
                {p: "Assay", s: "95.0 - 105.0 %", type: "range", min: 95, max: 105},
                {p: "DT", s: "NMT 15 min", type: "max", max: 15}
            ]
        }
    };

    function showView(id, el) {
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        document.getElementById('view-' + id).classList.add('active');
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        el.classList.add('active');
    }

    function applySpecs() {
        const id = document.getElementById('prod-select').value;
        if(!id) return;
        const data = library[id];
        document.getElementById('out-name').innerText = data.name;
        document.getElementById('out-ar').innerText = data.ar;
        document.getElementById('out-spec').innerText = data.spec;

        let html = '<tr class="section-title"><td colspan="4">Physico-Chemical Analysis</td></tr>';
        data.tests.forEach((t, i) => {
            html += `<tr><td>${t.p}</td><td>${t.s}</td><td><input type="text" id="qc-res-${i}"></td><td>-</td></tr>`;
        });
        document.getElementById('chemical-body').innerHTML = html;
    }

    function validateIPC(type) {
        const val = parseFloat(document.getElementById('res-' + type).value);
        const stat = document.getElementById('stat-' + type);
        let pass = false;

        if(type === 'fri') pass = val <= 1.0;
        if(type === 'dt') pass = val <= 15;
        if(type === 'thick') pass = val >= 4.0 && val <= 4.4;

        if(isNaN(val)) stat.innerHTML = "-";
        else stat.innerHTML = pass ? '<span class="status-badge pass">PASS</span>' : '<span class="status-badge fail">FAIL</span>';
    }
</script>

</body>
</html>